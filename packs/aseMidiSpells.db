{"name":"Darkness - MIDI","type":"spell","img":"systems/dnd5e/icons/spells/evil-eye-red-2.jpg","data":{"description":{"value":"<p>Magical darkness spreads from a point you choose within range to fill a 15-foot-radius sphere for the duration. The darkness spreads around corners. A creature with darkvision can't see through this darkness, and nonmagical light can't illuminate it.</p><p>If the point you choose is on an object you are holding or one that isn't being worn or carried, the darkness emanates from the object and moves with it. Completely covering the source of the darkness with an opaque object, such as a bowl or a helm, blocks the darkness.</p><p>If any of this spell's area overlaps with an area of light created by a spell of 2nd level or lower, the spell that created the light is dispelled.</p>","chat":"","unidentified":""},"source":"PHB pg. 230","activation":{"type":"action","cost":1,"condition":""},"duration":{"value":10,"units":"minute"},"target":{"value":null,"width":null,"units":"","type":""},"range":{"value":60,"long":0,"units":"ft"},"uses":{"value":0,"max":"0","per":""},"consume":{"type":"","target":"","amount":null},"ability":"","actionType":"util","attackBonus":0,"chatFlavor":"","critical":null,"damage":{"parts":[],"versatile":"","value":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell","value":""},"level":2,"school":"evo","components":{"value":"","vocal":true,"somatic":false,"material":true,"ritual":false,"concentration":true},"materials":{"value":"Bat fur and a drop of pitch or piece of coal","consumed":false,"cost":0,"supply":0},"preparation":{"mode":"prepared","prepared":false},"scaling":{"mode":"none","formula":""}},"effects":[],"folder":null,"sort":0,"permission":{"default":0,"FEWmZGWq8JJmEjb4":3},"flags":{"core":{"sourceId":"Compendium.dnd5e.spells.S7VbUetIfVT7B6Eq"},"enhancedcombathud":{"set1p":false,"set2p":false,"set3p":false},"targetreacts":{"shakeDelay":""},"midi-qol":{"onUseMacroName":"ItemMacro"},"itemacro":{"macro":{"data":{"_id":null,"name":"Darkness","type":"script","author":"FEWmZGWq8JJmEjb4","img":"icons/svg/dice-target.svg","scope":"global","command":"/*ASE_REPLACED*/if(args[0] === \"off\"){\n                        //console.log(\"token: \", token)\n                        let darknessTiles = Tagger.getByTag(`DarknessTile-${token.id}`);\n                        darknessTiles.then(async (tiles) => {\n                            //console.log(\"tiles to delete: \", [tiles[0].id]);\n                            if(tiles.length>0){\n                            game.AdvancedSpellEffects.removeTiles([tiles[0].id]);\n                        }\n                        })\n                    }\n                else\n                {\n                    let options = {version: \"MIDI\", args: args};\n                    game.AdvancedSpellEffects.darkness(options);\n                }","folder":null,"sort":0,"permission":{"default":0},"flags":{}}}}},"_id":"B7BsPwufcI1YaxBJ"}
{"name":"Detect Magic - MIDI","type":"spell","img":"systems/dnd5e/icons/spells/light-blue-2.jpg","data":{"description":{"value":"<p>For the duration, you sense the presence of magic within 30 feet of you. If you sense magic in this way, you can use your action to see a faint aura around any visible creature or object in the area that bears magic, and you learn its school of magic, if any.</p>\n<p>The spell can penetrate most barriers, but it is blocked by 1 foot of stone, 1 inch of common metal, a thin sheet of lead, or 3 feet of wood or dirt.</p>","chat":"<p>For the duration, you sense the presence of magic within 30 feet of you. If you sense magic in this way, you can use your action to see a faint aura around any visible creature or object in the area that bears magic, and you learn its school of magic, if any.</p>\n<p>The spell can penetrate most barriers, but it is blocked by 1 foot of stone, 1 inch of common metal, a thin sheet of lead, or 3 feet of wood or dirt.</p>","unidentified":""},"source":"Basic Rules, Player's Handbook pg 231","activation":{"type":"action","cost":1,"condition":""},"duration":{"value":10,"units":"minute"},"target":{"value":null,"width":null,"units":"","type":"self"},"range":{"value":null,"long":null,"units":"self"},"uses":{"value":0,"max":"0","per":""},"consume":{"type":"","target":"","amount":null},"ability":"","actionType":"other","attackBonus":0,"chatFlavor":"","critical":null,"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"level":1,"school":"div","components":{"value":"","vocal":true,"somatic":true,"material":false,"ritual":true,"concentration":true},"materials":{"value":"","consumed":false,"cost":0,"supply":0},"preparation":{"mode":"prepared","prepared":true},"scaling":{"mode":"none","formula":""}},"effects":[],"folder":null,"sort":0,"permission":{"default":0,"FEWmZGWq8JJmEjb4":3},"flags":{"ddbimporter":{"id":2641017,"definitionId":2065,"entityTypeId":435869154,"dndbeyond":{"lookup":"classSpell","class":"Artificer","level":1,"characterClassId":68819257,"spellLevel":1,"ability":"int","mod":3,"dc":13,"cantripBoost":false,"overrideDC":false,"id":2641017,"entityTypeId":435869154,"healingBoost":0},"sources":[{"sourceId":1,"pageNumber":null,"sourceType":2},{"sourceId":2,"pageNumber":231,"sourceType":1}],"tags":["Detection"],"ignoreIcon":false,"ignoreItemImport":true,"retainResourceConsumption":false},"betterRolls5e":{"quickVersatile":{"altValue":true},"quickCharges":{"value":{"use":true,"resource":true},"altValue":{"use":true,"resource":true}}},"autoanimations":{"killAnim":false,"animLevel":false,"override":false,"animType":"t11","animName":"fog cloud","bards":{"bardAnim":"a1","bardTarget":true,"bardTargetAnim":"a1","bardTargetColor":"a1","bardSelf":true,"marker":true,"markerColor":"a1","markerColorTarget":"a1"},"spellVar":"a1","hmAnim":"a1","color":"","spellOptions":{"spellLoops":1},"uaStrikeType":"physical","dtvar":"dt1","divineSmite":{"dsEnable":false,"dsSelf":true,"dsSelfDelay":0,"dsSelfColor":"a1","dsTarget":true,"dsTargetDelay":1250,"dsTargetColor":"a1"},"explosion":false,"exAnimLevel":false,"explodeVariant":"ev1","impactVar":"a1","explodeColor":"","explodeRadius":"0","explodeLoop":"1","allSounds":{"explosion":{"audioExplodeEnabled":false,"file":"","delay":100,"volume":0.25},"item":{"enableAudio":true,"file":"Audio/Custom/Magic/1stlevel/Detect%20Magic.wav","delay":0,"volume":0.25}},"selfRadius":5,"animTint":"#ffffff","auraOpacity":0.5,"ctaOption":false,"teleDist":30,"templates":{"tempType":"a1","tempAnim":"","tempColor":"","tempLoop":1,"customAnim":false,"customPath":""},"options":{"ammo":false,"enableCustom01":false,"ignoreTarget":false,"loops":1,"loopDelay":250},"sourceToken":{"enable":false}},"midi-qol":{"onUseMacroName":"ItemMacro"},"targetreacts":{"shakeDelay":""},"itemacro":{"macro":{"data":{"_id":null,"name":"Detect Magic - MIDI","type":"script","author":"FEWmZGWq8JJmEjb4","img":"icons/svg/dice-target.svg","scope":"global","command":"/*ASE_REPLACED*/if(args[0] === \"off\"){\n        let midiData = args[args.length-1];\n        let caster = canvas.tokens.get(midiData.tokenId);\n        let users = [];\n        for (const user in game.actors.get(midiData.actorId).data.permission) {\n            if (user == \"default\") continue;\n            users.push(user);\n        }\n        let objects = await Tagger.getByTag(\"magical\", { ignore: [caster] });\n        let magicalSchools = Object.values(CONFIG.DND5E.spellSchools).map(school => school.toLowerCase());\n        let magicalColors = [\"blue\", \"green\", \"pink\", \"purple\", \"red\", \"yellow\"];\n        let magicalObjects = [];\n        \n        magicalObjects = objects.map(o => {\n                            let distance = canvas.grid.measureDistance(caster, o);\n                            return {\n                                delay: 0,\n                                distance: distance,\n                                obj: o,\n                                school: Tagger.getTags(o).find(t => magicalSchools.includes(t.toLowerCase())) || false,\n                                color: Tagger.getTags(o).find(t => magicalColors.includes(t.toLowerCase())) || \"blue\"\n                            }\n                        })\n                        for (let magical of magicalObjects) {\n                            if (!magical.school) {\n                                continue;\n                            }\n                            await game.AdvancedSpellEffects.updateFlag(magical.obj.id, \"magicDetected\", false);\n                            Sequencer.EffectManager.endEffects({name: `${magical.obj.document.id}-magicRune`, object: magical.obj});\n                            Sequencer.EffectManager.endEffects({name: `${caster.id}-detectMagicAura`, object: caster});\n                            new Sequence()\n                                .effect(\"jb2a.magic_signs.rune.{{school}}.outro.{{color}}\")\n                                .forUsers(users)\n                                .atLocation(magical.obj)\n                                .scale(0.25)\n                                .setMustache(magical)\n                                .zIndex(0)\n                                .effect()\n                                .file(\"jb2a.magic_signs.circle.02.divination.outro.blue\")\n                                .atLocation(caster)\n                                .scale(0.2)\n                                .belowTokens()\n                                .attachTo(caster)\n                            .play()\n                        }\n        }\n        else if(args[0] != \"on\" && args[0] != \"off\"){\n            let options = {version: \"MIDI\", args: args, waveColor: \"blue\", auraColor: \"blue\"};\n            game.AdvancedSpellEffects.detectMagic(options);\n        }","folder":null,"sort":0,"permission":{"default":0},"flags":{}}}},"enhancedcombathud":{"set1p":false,"set2p":false,"set3p":false},"core":{"sourceId":"Item.VzobMzqHwTLUnVEt"}},"_id":"jPoTnLWup0T7ONAT"}
{"name":"Fog Cloud - MIDI","type":"spell","img":"systems/dnd5e/icons/spells/fog-water-air-2.jpg","data":{"description":{"value":"<p>You create a 20-foot-radius sphere of fog centered on a point within range. The sphere spreads around corners, and its area is heavily obscured. It lasts for the duration or until a wind of moderate or greater speed (at least 10 miles per hour) disperses it.</p>\n<p><strong>At Higher Levels.</strong> When you cast this spell using a spell slot of 2nd level or higher, the radius of the fog increases by 20 feet for each slot level above 1st.</p>","chat":"<p>You create a 20-foot-radius sphere of fog centered on a point within range. The sphere spreads around corners, and its area is heavily obscured. It lasts for the duration or until a wind of moderate or greater speed (at least 10 miles per hour) disperses it.</p>\n<p><strong>At Higher Levels.</strong> When you cast this spell using a spell slot of 2nd level or higher, the radius of the fog increases by 20 feet for each slot level above 1st.</p>","unidentified":""},"source":"Basic Rules, Player's Handbook pg 243","activation":{"type":"action","cost":1,"condition":""},"duration":{"value":1,"units":"hour"},"target":{"value":null,"width":null,"units":"","type":""},"range":{"value":120,"long":null,"units":"ft"},"uses":{"value":0,"max":"0","per":""},"consume":{"type":"","target":"","amount":null},"ability":"","actionType":"other","attackBonus":0,"chatFlavor":"","critical":null,"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"level":1,"school":"con","components":{"value":"","vocal":true,"somatic":true,"material":false,"ritual":false,"concentration":true},"materials":{"value":"","consumed":false,"cost":0,"supply":0},"preparation":{"mode":"prepared","prepared":true},"scaling":{"mode":"none","formula":""}},"effects":[],"folder":null,"sort":0,"permission":{"default":0,"FEWmZGWq8JJmEjb4":3},"flags":{"ddbimporter":{"id":137872,"definitionId":2112,"entityTypeId":435869154,"dndbeyond":{"lookup":"classSpell","class":"Druid","level":3,"characterClassId":68919579,"spellLevel":1,"ability":"wis","mod":3,"dc":13,"cantripBoost":false,"overrideDC":false,"id":137872,"entityTypeId":435869154,"healingBoost":0},"sources":[{"sourceId":1,"pageNumber":null,"sourceType":2},{"sourceId":2,"pageNumber":243,"sourceType":1}],"tags":["Control","Environment"]},"betterRolls5e":{"quickVersatile":{"altValue":true},"quickCharges":{"value":{"use":true,"resource":true},"altValue":{"use":true,"resource":true}}},"midi-qol":{"onUseMacroName":"ItemMacro"},"autoanimations":{"killAnim":false,"animLevel":false,"override":true,"color":"a1","options":{"loops":1,"loopDelay":250},"allSounds":{"item":{"enableAudio":false}},"sourceToken":{"enable":false},"targetToken":{"enable":false},"animType":"t8","templates":{"tempType":"circle","tempAnim":"fogcloud","tempColor":"","customAnim":false,"removeTemplate":true,"tempLoop":1,"loopDelay":250,"persistent":true,"opacity":1,"overhead":true}},"targetreacts":{"shakeDelay":""},"siftoolkit":{"SIFData":{"ignoreDuration":false,"texture":"","useTexture":false,"alpha":50,"coneOrigin":1,"loopAnimations":true,"playTemplateAudio":false,"playDamageAudio":false,"clip":"","volume":100}},"enhancedcombathud":{"set1p":false,"set2p":false,"set3p":false},"itemacro":{"macro":{"data":{"_id":null,"name":"Fog Cloud","type":"script","author":"FEWmZGWq8JJmEjb4","img":"icons/svg/dice-target.svg","scope":"global","command":"/*ASE_REPLACED*/\nif(args[0] === \"off\"){\n    console.log(\"token: \", token)\n    let fogCloudTiles = Tagger.getByTag(`FogCloudTile-${token.id}`);\n        fogCloudTiles.then(async (tiles) => {\n            console.log(\"tiles to delete: \", tiles);\n            if(tiles.length>0){\n            game.AdvancedSpellEffects.removeTiles([tiles[0].id]);\n            }\n        })\n        }\n    else if(args[0] != \"on\" && args[0] != \"off\"){\n        let options = {version: \"MIDI\", args: args, numberWalls: 12};\n        game.AdvancedSpellEffects.fogCloud(options);\n    }","folder":null,"sort":0,"permission":{"default":0},"flags":{}}}},"core":{"sourceId":"Item.PiofpRrRonSkJl25"}},"_id":"dzuAvZZcQfONqSzP"}
{"name":"Steel Wind Strike - MIDI","type":"spell","img":"icons/magic/lightning/bolt-beam-strike-blue.webp","data":{"description":{"value":"<p style=\"box-sizing:border-box;margin-top:0px;margin-bottom:10px;color:#333333;font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:#ffffff\">You flourish the weapon used in the casting and then vanish to strike like the wind. Choose up to five creatures you can see within range. Make a melee spell attack against each target. On a hit, a target takes 6d10 force damage.</p>\n<p style=\"box-sizing:border-box;margin-top:0px;margin-bottom:10px;color:#333333;font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:#ffffff\">You can then teleport to an unoccupied space you can see within 5 feet of one of the targets you hit or missed.</p>","chat":"","unidentified":""},"source":"","activation":{"type":"action","cost":1,"condition":""},"duration":{"value":null,"units":""},"target":{"value":null,"width":null,"units":"","type":""},"range":{"value":30,"long":null,"units":"ft"},"uses":{"value":0,"max":"0","per":""},"consume":{"type":"","target":"","amount":null},"ability":"","actionType":"other","attackBonus":0,"chatFlavor":"","critical":null,"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"level":5,"school":"con","components":{"value":"","vocal":false,"somatic":false,"material":false,"ritual":false,"concentration":false},"materials":{"value":"","consumed":false,"cost":0,"supply":0},"preparation":{"mode":"prepared","prepared":false},"scaling":{"mode":"none","formula":""}},"effects":[],"folder":null,"sort":0,"permission":{"default":0,"FEWmZGWq8JJmEjb4":3},"flags":{"enhancedcombathud":{"set1p":false,"set2p":false,"set3p":false},"targetreacts":{"shakeDelay":"750"},"midi-qol":{"onUseMacroName":"ItemMacro"},"itemacro":{"macro":{"data":{"_id":null,"name":"Steel Wind Strike","type":"script","author":"FEWmZGWq8JJmEjb4","img":"icons/svg/dice-target.svg","scope":"global","command":"let weapon = \"sword\";\nlet color = \"purple\"\nlet options = {version: \"MIDI\", args: args, weapon: weapon, color: color};\ngame.AdvancedSpellEffects.steelWindStrike(options);","folder":null,"sort":0,"permission":{"default":0},"flags":{}}}},"core":{"sourceId":"Item.wmFa4XwoGAfC0Fd4"}},"_id":"CxrYL7OQluW8GJ4I"}
{"name":"Thunder Step - MIDI","type":"spell","img":"systems/dnd5e/icons/skills/yellow_12.jpg","data":{"description":{"value":"<p class=\"Core-Styles_Core-Body\">You teleport yourself to an unoccupied space you can see within range. Immediately after you disappear, a thunderous boom sounds, and each creature within 10 feet of the space you left must make a Constitution saving throw, taking 3d10 thunder damage on a failed save, or half as much damage on a successful one. The thunder can be heard from up to 300 feet away.</p>\n<p class=\"Core-Styles_Core-Body\">You can bring along objects as long as their weight doesn’t exceed what you can carry. You can also teleport one willing creature of your size or smaller who is carrying gear up to its carrying capacity. The creature must be within 5 feet of you when you cast this spell, and there must be an unoccupied space within 5 feet of your destination space for the creature to appear in; otherwise, the creature is left behind.</p>\n<p class=\"Core-Styles_Core-Body\"><span class=\"Serif-Character-Style_Inline-Subhead-Serif\"><strong>At Higher Levels.</strong> </span>When you cast this spell using a spell slot of 4th level or higher, the damage increases by 1d10 for each slot level above 3rd.</p>","chat":"<p class=\"Core-Styles_Core-Body\">You teleport yourself to an unoccupied space you can see within range. Immediately after you disappear, a thunderous boom sounds, and each creature within 10 feet of the space you left must make a Constitution saving throw, taking 3d10 thunder damage on a failed save, or half as much damage on a successful one. The thunder can be heard from up to 300 feet away.</p>\n<p class=\"Core-Styles_Core-Body\">You can bring along objects as long as their weight doesn’t exceed what you can carry. You can also teleport one willing creature of your size or smaller who is carrying gear up to its carrying capacity. The creature must be within 5 feet of you when you cast this spell, and there must be an unoccupied space within 5 feet of your destination space for the creature to appear in; otherwise, the creature is left behind.</p>\n<p class=\"Core-Styles_Core-Body\"><span class=\"Serif-Character-Style_Inline-Subhead-Serif\"><strong>At Higher Levels.</strong> </span>When you cast this spell using a spell slot of 4th level or higher, the damage increases by 1d10 for each slot level above 3rd.</p>","unidentified":""},"source":"Xanathar's Guide to Everything pg 168","activation":{"type":"action","cost":1,"condition":""},"duration":{"value":null,"units":"inst"},"target":{"value":null,"width":null,"units":"","type":""},"range":{"value":90,"long":null,"units":"ft"},"uses":{"value":0,"max":"0","per":""},"consume":{"type":"","target":"","amount":null},"ability":"","actionType":"util","attackBonus":0,"chatFlavor":"","critical":null,"damage":{"parts":[],"versatile":""},"formula":"","save":{"ability":"","dc":null,"scaling":"spell"},"level":3,"school":"con","components":{"value":"","vocal":true,"somatic":false,"material":false,"ritual":false,"concentration":false},"materials":{"value":"","consumed":false,"cost":0,"supply":0},"preparation":{"mode":"prepared","prepared":false},"scaling":{"mode":"level","formula":""}},"effects":[],"folder":null,"sort":0,"permission":{"default":0,"FEWmZGWq8JJmEjb4":3},"flags":{"ddbimporter":{"id":138262,"definitionId":14613,"entityTypeId":435869154,"dndbeyond":{"lookup":"generic","lookupName":"generic","level":null,"castAtLevel":null},"sources":[{"sourceId":27,"pageNumber":168,"sourceType":1}],"tags":["Teleportation","Damage"]},"betterRolls5e":{"quickVersatile":{"altValue":true},"quickCharges":{"value":{"use":true,"resource":true},"altValue":{"use":true,"resource":true}}},"cf":{"id":"temp_dpq2n6d2998"},"enhancedcombathud":{"set1p":false,"set2p":false,"set3p":false},"targetreacts":{"shakeDelay":""},"midi-qol":{"onUseMacroName":"ItemMacro"},"core":{"sourceId":"Compendium.world.ddb-candlekeep-adventures-spells.9QYWTqV9pYuEKOHA"},"itemacro":{"macro":{"data":{"_id":null,"name":"Thunder Step","type":"script","author":"FEWmZGWq8JJmEjb4","img":"icons/svg/dice-target.svg","scope":"global","command":"let options = {version: \"MIDI\", args: args};\ngame.AdvancedSpellEffects.thunderStep(options);","folder":null,"sort":0,"permission":{"default":0},"flags":{}}}},"autoanimations":{"killAnim":true,"animLevel":false,"options":{"ammo":false},"override":false,"allSounds":{"item":{"enableAudio":false,"file":"Audio/Effects/Magic/Atk%20%20Fireball.mp3","delay":0,"volume":0.25}},"sourceToken":{"enable":false},"targetToken":{"enable":false}}},"_id":"LMr7618PSs4vezXG"}
